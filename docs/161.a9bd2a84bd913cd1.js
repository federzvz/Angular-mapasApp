"use strict";(self.webpackChunkAngular_mapasApp=self.webpackChunkAngular_mapasApp||[]).push([[161],{161:(z,m,p)=>{p.r(m),p.d(m,{MapasModule:()=>b});var l=p(895),d=p(944),s=p(898),o=p(256);let u=(()=>{class t{constructor(){}ngOnInit(){new s.Map({container:"mapa",style:"mapbox://styles/mapbox/streets-v11",center:[-56.067123697665835,-34.79693517557935],zoom:16})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-full-screen"]],decls:1,vars:0,consts:[["id","mapa"]],template:function(e,a){1&e&&o._UZ(0,"div",0)},styles:["#mapa[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})();const g=["mapa"];let h=(()=>{class t{constructor(){this.zoomLevel=16,this.center=[-56.067123697665835,-34.79693517557935]}ngOnDestroy(){this.mapa.off("zoom",()=>{}),this.mapa.off("move",()=>{})}ngAfterViewInit(){this.mapa=new s.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel,maxZoom:18}),this.mapa.on("zoom",()=>{this.zoomLevel=this.mapa.getZoom()}),this.mapa.on("move",()=>{this.center=[this.mapa.getCenter().lat,this.mapa.getCenter().lng]})}zoomOut(){this.mapa.zoomOut(),this.zoomLevel=this.mapa.getZoom()}zoomIn(){this.mapa.zoomIn(),this.zoomLevel=this.mapa.getZoom()}zoomCambio(e){this.mapa.zoomTo(Number(e)),this.zoomLevel=this.mapa.getZoom()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-zoom-range"]],viewQuery:function(e,a){if(1&e&&o.Gf(g,5),2&e){let r;o.iGM(r=o.CRH())&&(a.divMapa=r.first)}},decls:16,vars:13,consts:[[1,"mapa-container"],["mapa",""],[1,"row"],[1,"col-12"],[1,"form-label"],["type","range","min","0","max","18",1,"form-range",3,"value","input"],["zoomInput",""],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","float-end",3,"click"]],template:function(e,a){if(1&e){const r=o.EpF();o._UZ(0,"div",0,1),o.TgZ(2,"div",2)(3,"div",3)(4,"label",4),o._uU(5),o.ALo(6,"number"),o.ALo(7,"number"),o.ALo(8,"number"),o.qZA(),o.TgZ(9,"input",5,6),o.NdJ("input",function(){o.CHM(r);const c=o.MAs(10);return o.KtG(a.zoomCambio(c.value))}),o.qZA()(),o.TgZ(11,"div",3)(12,"button",7),o.NdJ("click",function(){return a.zoomOut()}),o._uU(13," - "),o.qZA(),o.TgZ(14,"button",8),o.NdJ("click",function(){return a.zoomIn()}),o._uU(15," + "),o.qZA()()()}2&e&&(o.xp6(5),o.lnq(" - Zoom: ",o.xi3(6,4,a.zoomLevel,"2.0-2")," - Longitud, Latitud: ",o.xi3(7,7,a.center[0],"2.0-2"),", ",o.xi3(8,10,a.center[1],"2.0-2")," "),o.xp6(4),o.Q6J("value",a.zoomLevel))},dependencies:[l.JJ],styles:[".mapa-container[_ngcontent-%COMP%]{width:100%;height:100%}.row[_ngcontent-%COMP%]{background-color:#fff;z-index:999;position:fixed;bottom:50px;border-radius:5px;left:50px;padding:10px;width:400px}"]}),t})();const f=["mapa"],M=function(t){return{"background-color":t}};function _(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"li",5),o.NdJ("dblclick",function(){const i=o.CHM(e).index,c=o.oxw();return o.KtG(c.borrarMarcador(i))})("click",function(){const i=o.CHM(e).index,c=o.oxw();return o.KtG(c.irMarcador(i))}),o._uU(1),o.qZA()}if(2&t){const a=n.index;o.Q6J("ngStyle",o.VKq(2,M,n.$implicit.color)),o.xp6(1),o.hij(" Marcador ",a+1," ")}}let v=(()=>{class t{constructor(){this.zoomLevel=15,this.center=[-56.067123697665835,-34.79693517557935],this.marcadores=[]}ngAfterViewInit(){this.mapa=new s.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel,maxZoom:18}),this.leerMarcadoresLocalStorage()}agregarMarcador(){const e="#xxxxxx".replace(/x/g,r=>(16*Math.random()|0).toString(16)),a=new s.Marker({draggable:!0,color:e}).setLngLat(this.center).addTo(this.mapa);this.marcadores.push({color:e,marker:a}),this.guardarMarcadoresLocalStorage(),a.on("dragend",()=>{this.guardarMarcadoresLocalStorage()})}irMarcador(e){this.mapa.flyTo({center:this.marcadores[e].marker?.getLngLat(),zoom:this.zoomLevel})}guardarMarcadoresLocalStorage(){const e=[];this.marcadores.forEach(a=>{const r=a.color,{lng:i,lat:c}=a.marker.getLngLat();e.push({color:r,centro:[i,c]})}),localStorage.setItem("marcadores",JSON.stringify(e))}leerMarcadoresLocalStorage(){localStorage.getItem("marcadores")&&JSON.parse(localStorage.getItem("marcadores")).forEach(a=>{const r=a.color,i=a.centro,c=new s.Marker({draggable:!0,color:r}).setLngLat(i).addTo(this.mapa);this.marcadores.push({color:r,marker:c}),c.on("dragend",()=>{this.guardarMarcadoresLocalStorage()})})}borrarMarcador(e){console.log("borrar"),this.marcadores[e].marker?.remove(),this.marcadores.splice(e,1),this.guardarMarcadoresLocalStorage()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-marcadores"]],viewQuery:function(e,a){if(1&e&&o.Gf(f,5),2&e){let r;o.iGM(r=o.CRH())&&(a.divMapa=r.first)}},decls:6,vars:1,consts:[[1,"list-group"],[1,"list-group-item","list-group-item-info",3,"click"],["class","list-group-item list-group-item-info",3,"ngStyle","dblclick","click",4,"ngFor","ngForOf"],[1,"mapa-container"],["mapa",""],[1,"list-group-item","list-group-item-info",3,"ngStyle","dblclick","click"]],template:function(e,a){1&e&&(o.TgZ(0,"ul",0)(1,"li",1),o.NdJ("click",function(){return a.agregarMarcador()}),o._uU(2,"+ Agregar"),o.qZA(),o.YNc(3,_,2,4,"li",2),o.qZA(),o._UZ(4,"div",3,4)),2&e&&(o.xp6(3),o.Q6J("ngForOf",a.marcadores))},dependencies:[l.sg,l.PC],styles:[".mapa-container[_ngcontent-%COMP%]{width:100%;height:100%}.list-group[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:99}li[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();const C=["mapa"];let L=(()=>{class t{constructor(){this.lngLat=[0,0]}ngAfterViewInit(){var e=new s.Map({container:this.divMapa.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.lngLat,zoom:16,interactive:!1});(new s.Marker).setLngLat(this.lngLat).addTo(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-mini-mapa"]],viewQuery:function(e,a){if(1&e&&o.Gf(C,5),2&e){let r;o.iGM(r=o.CRH())&&(a.divMapa=r.first)}},inputs:{lngLat:"lngLat"},decls:2,vars:0,consts:[["mapa",""]],template:function(e,a){1&e&&o._UZ(0,"div",null,0)},styles:["div[_ngcontent-%COMP%]{width:100%;height:150px;margin:0}"]}),t})();function x(t,n){if(1&t&&(o.TgZ(0,"div",6)(1,"div",7),o._UZ(2,"app-mini-mapa",8),o.TgZ(3,"div",9)(4,"h5",10),o._uU(5),o.qZA(),o.TgZ(6,"p",11),o._uU(7),o.qZA()()()()),2&t){const e=n.$implicit;o.xp6(2),o.Q6J("lngLat",e.lngLat),o.xp6(3),o.Oqu(e.titulo),o.xp6(2),o.Oqu(e.descripcion)}}const Z=[{path:"",children:[{path:"fullscreen",component:u},{path:"zoom-range",component:h},{path:"marcadores",component:v},{path:"propiedades",component:(()=>{class t{constructor(){this.propiedades=[{titulo:"Casa residencial, Canad\xe1",descripcion:"Bella propiedad en Katana, Canad\xe1",lngLat:[-75.92722289474008,45.280015511264466]},{titulo:"Casa de playa, M\xe9xico",descripcion:"Hermosa casa de playa en Acapulco, M\xe9xico",lngLat:[-99.91287720907991,16.828940930185748]},{titulo:"Apartamento, Argentina",descripcion:"Lujoso apartamento en el coraz\xf3n de Buenos Aires, Argentina",lngLat:[-58.430166677283445,-34.57150108832866]},{titulo:"Local comercial, Espa\xf1a",descripcion:"Local comercial disponible en Madrid, Espa\xf1a, cerca de El Jard\xedn Secreto.",lngLat:[-3.7112735618380177,40.42567285425766]}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-propiedades"]],decls:11,vars:1,consts:[[1,"row","mt-3"],[1,"col-2"],[1,"col"],[1,"row","container"],[1,"row"],["class","col-4 mb-2",4,"ngFor","ngForOf"],[1,"col-4","mb-2"],[1,"card"],[1,"card-img-top",3,"lngLat"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(e,a){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"div",1),o.TgZ(2,"div",2)(3,"h1"),o._uU(4,"Lista de propiedades"),o.qZA(),o._UZ(5,"hr"),o.qZA()(),o.TgZ(6,"div",3),o._UZ(7,"div",1),o.TgZ(8,"div",2)(9,"div",4),o.YNc(10,x,8,3,"div",5),o.qZA()()()),2&e&&(o.xp6(10),o.Q6J("ngForOf",a.propiedades))},dependencies:[l.sg,L]}),t})()},{path:"**",redirectTo:"fullscreen"}]}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[d.Bz.forChild(Z),d.Bz]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[l.ez,y]}),t})()}}]);